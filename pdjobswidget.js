class PDJobWidget extends HTMLElement {
  constructor() {
      super();

      // Create a shadow root
      this.attachShadow({ mode: 'open' });

      // Create HTML structure
      this.shadowRoot.innerHTML = `
        <style>
          #pdjwrapper {
            display: block;
            padding: 2rem;
            font-family: Arial, Helvetica, sans-serif;
            background: #f7f5f4;
            border-radius: 10px;
          }
          #pdj-logo {
            width: 160px;
            margin-bottom: 1.5rem;
          }
          #pdj-logo svg {
            max-width: 100%;
            height: auto;
          }
          label {
            display: block;
            font-size: 0.875rem;
            color: #111827;
            font-weight: bold;
            line-height: 1.5rem;
          }
          input {
            appearance: none;
            display: block;
            box-sizing: border-box;
            width: 100%;
            padding: 0.75rem 1rem;
            margin-bottom: 1rem;
            font-size: 0.875rem;
            line-height: 1.5rem;
            border: 0;
            border-radius: 0.375rem;
            background-color: #fff;
            box-shadow: rgb(255, 255, 255) 0px 0px 0px 0px inset, rgb(209, 213, 219) 0px 0px 0px 1px inset, rgba(0, 0, 0, 0.05) 0px 1px 2px 0px;
          }
          input:focus {
            outline: 0;
            box-shadow: rgb(255, 255, 255) 0px 0px 0px 0px inset, rgb(233, 128, 35) 0px 0px 0px 1px inset, rgba(0, 0, 0, 0.05) 0px 1px 2px 0px;
          }
          #result a {
            display: inline-block;
            padding: 0.5em 1em;
            font-size: 0.875rem;
            line-height: 1.5rem;
            font-weight: bold;
            color: #fff;
            text-decoration: none;
            border-radius: 5px;
            background-color: #E98023;
          }
          #result a.disabled {
            pointer-events: none;
          }
        </style>
        <div id="pdjwrapper">
          <div id="pdj-logo">
            <svg viewBox="0 0 190 77" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <title>Findit! Local Jobs</title>
              <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="findit-home" transform="translate(-248, -154)" fill-rule="nonzero">
                  <g id="findit-logo" transform="translate(248, 154)">
                    <path d="M0,43.7018996 L11.6111095,43.7018996 L11.6111095,28.7354956 L31.421817,28.7354956 L31.421817,19.0971315 L11.6111095,19.0971315 L11.6111095,11.9731232 L33.5166048,11.9731232 L33.5166048,1.79596848 L0,1.79596848 L0,43.7018996 Z M37.7261308,8.38118622 L49.5766446,8.38118622 L49.5766446,0 L37.7261308,0 L37.7261308,8.38118622 Z M37.9655351,43.7018996 L49.3372403,43.7018996 L49.3372403,11.3146014 L37.9655351,11.3146014 L37.9655351,43.7018996 Z M56.1206141,43.7018996 L67.4923193,43.7018996 L67.4923193,26.1612741 C67.4923193,22.6292028 69.527256,20.7135031 72.2804057,20.7135031 C74.9737043,20.7135031 76.8290878,22.6292028 76.8290878,26.1612741 L76.8290878,43.7018996 L88.200793,43.7018996 L88.200793,22.5094716 C88.200793,15.1460008 84.0710684,10.596214 77.1881942,10.596214 C72.5796611,10.596214 69.5871071,13.1704355 67.4923193,15.8643882 L67.4923193,11.3146014 L56.1206141,11.3146014 L56.1206141,43.7018996 Z M105.54625,44.420287 C110.394187,44.420287 113.207188,42.085528 115.421678,39.3915753 L115.421678,43.7018996 L126.793383,43.7018996 L126.793383,2.84217094e-14 L115.421678,2.84217094e-14 L115.421678,15.2657321 C113.267039,12.8112418 110.394187,10.596214 105.486398,10.596214 C97.8254603,10.596214 91.2418415,17.0018349 91.2418415,27.5381833 L91.2418415,27.6579145 C91.2418415,38.0146661 97.8853113,44.420287 105.54625,44.420287 Z M109.017612,34.9016541 C105.366696,34.9016541 102.374142,31.8485077 102.374142,27.5381833 L102.374142,27.4184521 C102.374142,23.1081277 105.366696,20.1148469 109.017612,20.1148469 C112.668528,20.1148469 115.601231,23.1679933 115.601231,27.4184521 L115.601231,27.5381833 C115.601231,31.8485077 112.668528,34.9016541 109.017612,34.9016541 Z" id="Combined-Shape" fill="#000000"></path>
                    <path d="M133.080977,8.38118622 L144.93149,8.38118622 L144.93149,5.67161047e-14 L133.080977,5.67161047e-14 L133.080977,8.38118622 Z M133.320381,43.7018996 L144.692086,43.7018996 L144.692086,11.3146014 L133.320381,11.3146014 L133.320381,43.7018996 Z M163.766587,44.3604214 C166.938695,44.3604214 169.631993,43.642034 171.66693,42.5045873 L171.66693,33.5846105 C170.290355,34.2431323 168.853929,34.6621916 167.357652,34.6621916 C165.262864,34.6621916 164.245396,33.7043417 164.245396,31.4294483 L164.245396,20.4740406 L171.786632,20.4740406 L171.786632,11.3146014 L164.245396,11.3146014 L164.245396,3.11301203 L152.873691,3.11301203 L152.873691,11.3146014 L149.043222,11.3146014 L149.043222,20.4740406 L152.873691,20.4740406 L152.873691,33.6444761 C152.873691,41.3671406 156.943564,44.3604214 163.766587,44.3604214 Z M180.543529,30.0525392 L186.528637,30.0525392 L190,6.88454583 L190,1.79596848 L177.072167,1.79596848 L177.072167,6.88454583 L180.543529,30.0525392 Z M177.610826,43.7018996 L189.46134,43.7018996 L189.46134,33.5247449 L177.610826,33.5247449 L177.610826,43.7018996 Z" id="Combined-Shape" fill="#E98023"></path>
                    <path d="M28.4931042,76.6168601 L28.4931042,72.1468941 L17.3528231,72.1468941 L17.3528231,54.2670301 L12.4370544,54.2670301 L12.4370544,76.6168601 L28.4931042,76.6168601 Z M48.8579319,68.0919964 L48.8579319,68.0281397 C48.8579319,63.1111771 44.931701,59.1839927 39.6328854,59.1839927 C34.3021492,59.1839927 30.3439978,63.1750338 30.3439978,68.0919964 L30.3439978,68.155853 C30.3439978,73.0728156 34.2702287,77 39.5690443,77 C44.8997805,77 48.8579319,73.0089589 48.8579319,68.0919964 Z M44.0698455,68.155853 C44.0698455,70.678191 42.4099755,72.817389 39.6328854,72.817389 C36.951557,72.817389 35.1320842,70.6143343 35.1320842,68.0919964 L35.1320842,68.0281397 C35.1320842,65.5058017 36.7919542,63.3666037 39.5690443,63.3666037 C42.2503727,63.3666037 44.0698455,65.5696584 44.0698455,68.0919964 L44.0698455,68.155853 Z M66.8031161,73.8710238 L63.9621849,70.9974742 C62.7811235,72.1149657 61.6639034,72.817389 60.035954,72.817389 C57.3865462,72.817389 55.6947557,70.7101193 55.6947557,68.0919964 L55.6947557,68.0281397 C55.6947557,65.5058017 57.4184668,63.3666037 59.8444305,63.3666037 C61.5681417,63.3666037 62.6534412,64.1009553 63.7387408,65.2503751 L66.7073544,62.0575423 C65.1113256,60.2695559 63.1003293,59.1839927 59.8763511,59.1839927 C54.6413767,59.1839927 50.9066693,63.2069621 50.9066693,68.0919964 L50.9066693,68.155853 C50.9066693,73.0408873 54.6732972,77 59.81251,77 C63.2280116,77 65.1432462,75.6909385 66.8031161,73.8710238 Z M84.2663316,76.6168601 L84.2663316,66.6871499 C84.2663316,62.0575423 81.9361295,59.311706 76.6373139,59.311706 C73.7325415,59.311706 71.8811481,59.8544876 69.9978341,60.6846241 L71.210816,64.3883103 C72.7749242,63.8136003 74.0836678,63.4623887 75.9350612,63.4623887 C78.361025,63.4623887 79.6059275,64.5798802 79.6059275,66.5913649 L79.6059275,66.8787199 C78.3929456,66.4636516 77.1480431,66.1762966 75.424332,66.1762966 C71.3704189,66.1762966 68.5294876,67.9004264 68.5294876,71.6360408 L68.5294876,71.6998975 C68.5294876,75.0843003 71.1788954,76.9361433 74.4028736,76.9361433 C76.7649962,76.9361433 78.3929456,76.0740785 79.5740069,74.765017 L79.5740069,76.6168601 L84.2663316,76.6168601 Z M79.6697686,70.582406 C79.6697686,72.338464 78.137581,73.5836689 75.8712201,73.5836689 C74.3071119,73.5836689 73.2218123,72.817389 73.2218123,71.5083275 L73.2218123,71.4444708 C73.2218123,69.9119111 74.4986353,69.0817745 76.5734728,69.0817745 C77.7545341,69.0817745 78.8398336,69.3372012 79.6697686,69.7203411 L79.6697686,70.582406 Z M93.1109915,76.6168601 L93.1109915,53.3091803 L88.2590639,53.3091803 L88.2590639,76.6168601 L93.1109915,76.6168601 Z M119.929596,68.8902046 L119.929596,54.2670301 L114.886145,54.2670301 L114.886145,68.6667063 C114.886145,71.2529009 113.737004,72.3703924 111.885611,72.3703924 C110.321503,72.3703924 109.0766,71.5402558 107.799777,70.1354094 L104.703481,73.5836689 C106.235669,75.4035836 108.53395,76.9361433 112.013293,76.9361433 C116.737539,76.9361433 119.929596,74.3180204 119.929596,68.8902046 Z M141.566701,68.0919964 L141.566701,68.0281397 C141.566701,63.1111771 137.640471,59.1839927 132.341655,59.1839927 C127.010919,59.1839927 123.052767,63.1750338 123.052767,68.0919964 L123.052767,68.155853 C123.052767,73.0728156 126.978998,77 132.277814,77 C137.60855,77 141.566701,73.0089589 141.566701,68.0919964 Z M136.778615,68.155853 C136.778615,70.678191 135.118745,72.817389 132.341655,72.817389 C129.660327,72.817389 127.840854,70.6143343 127.840854,68.0919964 L127.840854,68.0281397 C127.840854,65.5058017 129.500724,63.3666037 132.277814,63.3666037 C134.959142,63.3666037 136.778615,65.5696584 136.778615,68.0919964 L136.778615,68.155853 Z M162.438191,68.0919964 L162.438191,68.0281397 C162.438191,62.3129689 158.639643,59.1839927 154.649571,59.1839927 C152.127845,59.1839927 150.499896,60.3653409 149.318835,61.9617573 L149.318835,53.3091803 L144.466907,53.3091803 L144.466907,76.6168601 L149.318835,76.6168601 L149.318835,74.3818771 C150.467975,75.7547952 152.064004,76.9361433 154.649571,76.9361433 C158.703484,76.9361433 162.438191,73.8071672 162.438191,68.0919964 Z M157.586264,68.0919964 C157.586264,70.9655459 155.671029,72.817389 153.404668,72.817389 C151.138307,72.817389 149.254993,70.9336176 149.254993,68.0919964 L149.254993,68.0281397 C149.254993,65.1865185 151.138307,63.3027471 153.404668,63.3027471 C155.671029,63.3027471 157.586264,65.1865185 157.586264,68.0281397 L157.586264,68.0919964 Z M177.680951,71.4125425 L177.680951,71.3486859 C177.680951,68.2197097 174.903861,67.0702898 172.509818,66.2720816 C170.658425,65.6335151 169.030475,65.1865185 169.030475,64.2286686 L169.030475,64.164812 C169.030475,63.4943171 169.636966,62.9834638 170.818028,62.9834638 C172.06293,62.9834638 173.754721,63.590102 175.446511,64.5798802 L177.297904,61.2274057 C175.446511,59.9822009 173.084388,59.2478494 170.913789,59.2478494 C167.466367,59.2478494 164.657356,61.1954774 164.657356,64.6756652 L164.657356,64.7395219 C164.657356,68.060068 167.370605,69.1775595 169.764649,69.8799828 C171.647963,70.4546927 173.307832,70.8059043 173.307832,71.8595391 L173.307832,71.9233958 C173.307832,72.6896757 172.669421,73.2005289 171.264916,73.2005289 C169.668887,73.2005289 167.721732,72.4981057 165.870338,71.1571159 L163.795501,74.3499487 C166.061862,76.1379351 168.74319,76.9361433 171.137233,76.9361433 C174.84002,76.9361433 177.680951,75.2120136 177.680951,71.4125425 Z" id="Local-Jobs" fill="#000000"></path>
                  </g>
                </g>
              </g>
            </svg>
          </div>
          <h2>Search for Local Jobs with Findit! Local Jobs</h2>
          <label>
            Job Title:
            <input type="text" id="jobTitle" placeholder="Enter job title or keyword (e.g., Engineer)" aria-label="Job Title">
          </label>
          <label>
            City:
            <input type="text" id="city" placeholder="Enter city (e.g., Santa Rosa)" aria-label="City">
          </label>
          <div id="result">
            <a id="urlLink" href="#" target="_blank" class="disabled">Search</a>
          </div>
        </div>
      `;
  }

  connectedCallback() {
      this.shadowRoot.querySelector('#jobTitle').addEventListener('input', () => this.updateUrl());
      this.shadowRoot.querySelector('#city').addEventListener('input', () => this.updateUrl());
      this.updateUrl(); // Initialize URL when component is connected
  }

  updateUrl() {
      // Get the input values
      const jobTitle = this.shadowRoot.querySelector('#jobTitle').value.trim();
      const city = this.shadowRoot.querySelector('#city').value.trim();
      const urlLink = this.shadowRoot.querySelector('#urlLink');

      if (jobTitle || city) {
          // Generate the URL string
          const url = `https://jobs.pressdemocrat.com/?s=${encodeURIComponent(jobTitle)}+${encodeURIComponent(city)}`;
          // Update the anchor element's href and text
          urlLink.href = url;
          urlLink.classList.remove('disabled');
      } else {
          urlLink.href = '#';
          urlLink.classList.add('disabled');
      }
  }
}

// Define the custom element
customElements.define('pdj-widget', PDJobWidget);

// Function to append the custom element to a target container
function renderPDJobWidget(containerSelector) {
  const container = document.querySelector(containerSelector);
  if (container) {
      const PDJobWidgetElement = document.createElement('pdj-widget');
      container.appendChild(PDJobWidgetElement);
  } else {
      console.error(`Error, required target element "${containerSelector}" not found.`);
  }
}

// Add event listener for DOMContentLoaded
document.addEventListener('DOMContentLoaded', () => {
  // Render the job city form in the specified container
  renderPDJobWidget('#pdjwcontainer');
});
